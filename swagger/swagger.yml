consumes:
- application/json
info:
  description: TH Server. Handles asssets, routing, data.
  title: Telehealers backend
  version: 0.0.0
paths: {}
produces:
- application/json
schemes:
- http
swagger: "2.0"
securityDefinitions:
  key:
    type: apiKey
    in: header
    name: telehealers-token

security:
  - key: []

paths:
  /profile_pictures/{name}:
    get:
      description: Central endpoint for profile pictures
      produces:
        - image/png
      parameters:
        - name: name
          in: path
          type: string
          required: true
      responses:
        200:
          description: Fetched image
          schema:
            type: file
        default:
          description: Error response
          schema:
            $ref: './definitions.yml#/error'
  # Doctor CRUD APIs
  /doctor/register:
    $ref: './doctor_crud_api.yml#/doctor/register'
  /doctor/update:
    $ref: './doctor_crud_api.yml#/doctor/update'
  /doctor/remove:
    $ref: './doctor_crud_api.yml#/doctor/remove'
  /doctor/find:
    $ref: './doctor_crud_api.yml#/doctor/find'
  # Patient CRUD APIs
  /patient/register:
    $ref: './patient_crud_api.yml#/patient/register'
  /patient/update:
    $ref: './patient_crud_api.yml#/patient/update'
  /patient/find:
    $ref: './patient_crud_api.yml#/patient/find'
  /patient/remove:
    $ref: './patient_crud_api.yml#/patient/remove'
  /book_appointment:
    post:
      description: Book appointment
      parameters:
        - name: doctor_id
          in: query
          type: string
          required: true
        - name: patient_id
          in: query
          type: string
          required: true
        - name: booking_time
          in: query
          type: integer
          required: true
      responses:
        200:
          description: Success
        default:
          description: Fails
          schema:
            $ref:  './definitions.yml#/error'
  /room_access_token:
    get:
      description: Returns a room access token. An access token is required by the room to perform any action.
      tags:
        - conferrencing
      parameters:
        - name: room 
          description: Room name for the conferrence. 
          in: query
          required: true
          type: string
        - name: id 
          description: Participant ID/name.
          in: query
          required: true
          type: string
      responses:
        200:
          description: Access token for the room x client.
          schema:
            type: string
        default:
          description: Failure
          schema:
            $ref: './definitions.yml#/error'
definitions:
  principal:
    type: string
