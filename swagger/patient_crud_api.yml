# patient CRUD APIs

register:
  put:
    tags:
      - patient
      - register
    parameters:
      - name: info
        in: body
        schema:
          required:
            - name
            - email
            - password
          $ref: '#/definitions/patient_info'
    responses:
      200:
        description: returns id of registered patient
        schema:
          type: object
          properties:
            registered_id:
              type: integer
      default:
        description: Error Response
        schema:
          $ref: './definitions.yml#/error'
update:
  post:
    tags:
      - patient
      - update
    parameters:
      - name: info
        in: body
        schema:
          required:
            - id
          $ref: '#/definitions/patient_info'
    responses:
      200:
        description: Update successful
      default:
        description: Error
        schema:
          $ref: './definitions.yml#/error'
find:
  get:
    tags:
      - patient
      - read
    parameters:
      - name: id
        in: query
        type: integer
        description: System id number
      - name: ids
        in: query
        description: List of patient IDs to be fetched
        type: array
        items: 
          type: integer
          description: System ID number
      - name: of_doctor
        in: query
        description: ID of doctor which patients have been consulted in past
        type: integer
      - name: name_containing
        in: query
        type: string
        description: find patients with name containing this string
      - name: page
        in: query
        type: integer
        description: pagination parameter, must be greater than 1
        default: 1
      - name: size
        in: query
        type: integer
        description: page size
        default: 10
    responses:
      200:
        description: List of matched patients
        schema:
          type: object
          properties:
            patients:
              type: array
              items:
                $ref: './patient_crud_api.yml#/definitions/patient_info'
      default:
        description: Error response
        schema:
          $ref: './definitions.yml#/error'
remove:
  delete:
    tags:
      - patient
      - delete
    parameters:
      - name: id
        in: query
        required: true
        type: integer
    responses:
      200:
      default:
        description: Error response
        schema:
          $ref: './definitions.yml#/error'
login:
  get:
    tags: 
      - patient
      - login
      - auth
    description: Login API
    parameters:
      - name: email
        type: string
        required: true
        in: query
      - name: password
        type: string
        required: true
        in: query
    responses:
      200:
        description: details of logged in patient
        schema:
          type: object
          properties:
            patient:
              $ref: './patient_crud_api.yml#/definitions/patient_info'
            session_id:
              type: string
      default:
        description: Error reqsponse
        schema:
          $ref: './definitions.yml#/error'

definitions:
  patient_info:
    type: object
    properties:
      id:
        description: internal system id as returned by other services.
        type: integer
      name:
        type: string
      email:
        type: string
      phone:
        type: string
      profile_picture_id:
        type: integer
        description: system id for profile picture
      about:
        type: string
        description: Info on patient, as given by themselves
      password:
        type: string
        description: Used for login and registration, never returned from backend